{% load static %}
<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <title>√âcoNova Finance</title>

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet"> <!-- Importation de la police Poppins -->
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="{% static 'css/tableau-bord/dashboard.css' %}">
    <link rel="stylesheet" href="{% static 'css/tableau-bord/suivi.css' %}">
    <link rel="stylesheet" href="{% static 'css/tableau-bord/chatbot.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="icon" href="{% static 'images/Logo EcoNova.png' %}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.12.2/lottie.min.js"></script>
    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
    <link rel="icon" href="{% static 'images/Logo EcoNova.png' %}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.12.2/lottie.min.js"></script>
    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</head>
<body>

<script src="{% static 'js/app.js' %}"></script>

  <header class="header">

  </header>

<!--Menu du profil (bouton en haut √† droite)-->
    <lottie-player class="icon-profile" id="icon-profile" src="{% static 'json/dashboard-icon/User_custom_icon.json' %}"
                       hover></lottie-player>
    <div class="menu-profil menu-hide" id="menu-profil">
        <div class="menu-profil-section1">
            <img src="{% static 'images/dashboard-icon/profil-icon.svg' %}" alt="Icon de profil">
            <h2>
                {{ user.username }}
            </h2>
            <h3>{{ user.email }}</h3>

        </div>
        <div class="menu-profil-section2">
            <a href="profil" class="">
                <img src="{% static 'images/dashboard-icon/profil.svg' %}" alt="Icon de profil">
                <h2>Mon profil</h2>
            </a>
            <a href="" class="">
                <img src="{% static 'images/dashboard-icon/parametre.svg' %}" alt="Icon de parametre">
                <h2>Param√®tres</h2>
            </a>
            <a href="" class="">
                <img src="{% static 'images/dashboard-icon/moon.svg' %}" alt="Icon de mode sombre">
                <h2>Mode sombre</h2>
            </a>
        </div>
        <div class="menu-profil-section3">
            <a href="/deconnexion" class="">
                <img src="{% static 'images/dashboard-icon/logout-svgrepo-com 1.svg' %}" alt="Icon de d√©connexion">
                <h2>Se d√©connecter</h2>
            </a>
        </div>
    </div>

<!--Menu √† gauche-->
    <section class="menu">
        <div class="logoSite">
          <a href="/"><img src="{% static 'images/Logo EcoNova.png' %}" alt="Logo √âcoNova Finance"
                                         class="logoSite"></a>
          <h2 class="econova-text">EcoNova</h2>
        </div>
        <div class="onglets">
            <a href="page-principale" class="page-principale onglet">
                <lottie-player src="{% static 'json/dashboard-icon/Home_custom_icon.json' %}" hover></lottie-player>
                <h2>Page principale</h2>
            </a>
            <div class="onglet-outils onglet">
                <lottie-player src="{% static 'json/dashboard-icon/Wrench_custom_icon.json' %}" hover></lottie-player>
                <h2 class="titre-outil">Outils Financiers</h2>
                <img src="{% static 'images/dashboard-icon/triangle.svg' %}" class="triangle">
            </div>

            <div class="outils" id="outils">
                <a href="suivi" class="onglet-suivi onglet">
                    <h2>Suivi</h2>
                </a>
                <a href="bourse" class="onglet-bourse onglet">
                    <h2>Bourse</h2>
                </a>
                <a href="" class="onglet-simulation onglet">
                    <h2>Simulation</h2>
                </a>
                <a href="chatbot" class="onglet-nova onglet">
                    <h2>NOVA</h2>
                </a>
            </div>
        </div>
        <a href="" class="onglet-dictionnaire onglet">
            <lottie-player src="{% static 'json/dashboard-icon/Arrow left_custom_icon.json' %}" hover></lottie-player>
            <h2>Dictionnaire Financier</h2>
        </a>
        <a href="" class="onglet-parametres onglet">
            <lottie-player src="{% static 'json/dashboard-icon/Settings_custom_icon.json' %}" hover></lottie-player>
            <h2>Param√®tres</h2>
        </a>
    </section>

<!--Section suivi financier-->

        <nav>
            <h1> Suivi Financier </h1>
        </nav>

        <div class="suivi-sections">
            <div class="actifs">
                <h2 class="sous-titre"> ACTIFS </h2>
                <label>
                    <h4 class="sous-sous-titre"> Compte Ch√®que </h4>
                    <input class="actif" type="text" name="compte-cheque" placeholder="...">
                </label>

                <label>
                    <h4 class="sous-sous-titre"> Compte Epargne </h4>
                    <input class="actif" type="text" name="compte-epargne" placeholder="...">
                </label>

                <label>
                    <h4 class="sous-sous-titre"> Compte Bourse </h4>
                    <input class="actif" type="text" name="compte-investissement" placeholder="...">
                </label>

                <label>
                    <h4 class="sous-sous-titre"> Compte Cryptomonnaie </h4>
                    <input class="actif" type="text" name="credits" placeholder="...">
                </label>

                <label>
                    <h4 class="sous-sous-titre"> Tout autre compte (REER, REEE, CELI, CELIAPP, etc) </h4>
                    <input class="actif" type="text" name="carte-credit" placeholder="...">
                </label>

            </div>

            <div class="passifs">
                <h2 class="sous-titre"> PASSIFS </h2>

                <label>
                    <h4 class="sous-sous-titre"> Cartes de Cr√©dit </h4>
                    <input class="passif" type="text" name="credits" placeholder="...">
                </label>

                <label>
                    <h4 class="sous-sous-titre"> Emprunts </h4>
                    <input class="passif" type="text" name="emprunts" placeholder="...">
                </label>

                <label>
                    <h4 class="sous-sous-titre"> Hypoth√®que </h4>
                    <input class="passif" type="text" name="immobilier" placeholder="...">
                </label>
            </div>

            <div class="barre-separation"> </div>

            <div class="interets">
                <h2> Suivi d'un investissement √† taux d'int√©r√™ts compos√©s </h2>

                <label>
                    <h4> Investissement Initial </h4>
                    <input type="text" name="investissement-initial" placeholder="...">
                </label>

                <label>
                    <h4> Placements Mensuels </h4>
                    <input type="text" name="placement-mensuel" placeholder="...">
                </label>

                <label>
                    <h4> Taux d'int√©r√™ts (%) </h4>
                    <input type="text" name="taux-interet" placeholder="...">
                </label>

                <div class="type-interet">
                    <button id="mensuel"> Mensuel </button>
                    <button id="annuel"> Annuel </button>
                </div>

                <label>
                    <h4> Dur√©e (Ann√©es / Mois) </h4>
                    <input type="text" name="duree" placeholder="...">
                </label>
            </div>
        </div>


    <div class="capital-section">
        <h2> Votre Capital :</h2>
        <p id="capital-value"> </p>
    </div>

    <div class="bas-de-page">
    </div>

<script src="{% static 'js/app.js' %}"></script>
<script src="{% static 'js/tableau-bord.js' %}"></script>

<!--JavaScript du calcul du capital lorsqu'on appuie sur le bouton-->

<script>
document.addEventListener("DOMContentLoaded", function () {
    const actifs = document.querySelectorAll(".actif");
    const passifs = document.querySelectorAll(".passif");

    function calculer() {
        console.log("üìä calculerCapital() a √©t√© appel√©e !"); //Pour savoir si la fonction est appel√©e

        let sommeActifs = 0;
        actifs.forEach(input => {
            sommeActifs += parseFloat(input.value) || 0;
        });

        let sommePassifs = 0;
        passifs.forEach(input => {
            sommePassifs += parseFloat(input.value) || 0;
        });

        let capital = sommeActifs - sommePassifs;

        document.getElementById("capital-value").textContent = capital.toLocaleString() + " $";
    }

    actifs.forEach(input => {
        input.addEventListener("input", calculer)
    });

    passifs.forEach(input => {
        input.addEventListener("input", calculer)
    });

    calculer()
});
</script>

<!--JavaScript de la selection des boutons mensuel ou annuel-->

<script>
document.addEventListener("DOMContentLoaded", function () {
    const mensuelBtn = document.getElementById("mensuel");
    const annuelBtn = document.getElementById("annuel");

    if (!mensuelBtn || !annuelBtn) {
        console.error("Les boutons 'mensuel' ou 'annuel' n'ont pas √©t√© trouv√©s dans le DOM.");
        return;
    }

    function selection(event) {
        console.log("Clic d√©tect√© sur :", event.target.id);
        mensuelBtn.classList.remove("selected");
        annuelBtn.classList.remove("selected");
        event.target.classList.add("selected");
    }

    mensuelBtn.addEventListener("click", selection);
    annuelBtn.addEventListener("click", selection);
});
</script>

</body>
</html>